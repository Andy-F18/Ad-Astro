<!DOCTYPE html>

<html>

<script>
	const queryString = window.location.search;
	const urlParams = new URLSearchParams(queryString);

	function readFile(file){
		var xmlHttp = new XMLHttpRequest();
	    xmlHttp.open( "GET", file, false ); // false for synchronous request
	    xmlHttp.send( null );
	    return xmlHttp.responseText;
	}
	header = readFile("https://raw.githubusercontent.com/Andy-F18/Andy-F18.github.io/main/elem/header.html");
	files = JSON.parse(readFile(`https://raw.githubusercontent.com/Andy-F18/Andy-F18.github.io/main/Images/${urlParams.get('album')}.json`));

	cards = [];
	for(obj of files){
		path = `./Images/${urlParams.get('album')}/${obj.fileName}`;
		link = `https://andy-f18.github.io/image?album=${urlParams.get('album')}&img=${obj.fileName}`
		card = 
			`<div class="card" onclick="window.location='${link}';">`+
				`<img src=${path} alt=${obj.name} style="width:100%">` + 
				`<div class="container">`+
					`<h4><b>${obj.name}</b></h4>`+
					`<p>${obj.date}</p>`+
				`</div>`+
			`</div>`
		cards.push(card)
	}
	

</script>

<head>
	<meta charset="utf-8">
	<script src="https://kit.fontawesome.com/985774d57b.js" crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/css?family=Oswald:400,700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/menu_style.css">
	<link rel="stylesheet" href="css/cartes.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<title>Ad Astro</title>
</head>

<body>
	<script>
	    document.write(header);
	</script>

	<div class="cards_container">
		<script>
			for(c of cards){
				document.write(c);
			}
		</script>

		
	</div>


</body>
</html>